{\rtf1\ansi\ansicpg1252\cocoartf1348\cocoasubrtf170
{\fonttbl\f0\fswiss\fcharset0 ArialMT;}
{\colortbl;\red255\green255\blue255;\red30\green30\blue30;}
\margl1440\margr1440\vieww11580\viewh9620\viewkind0
\deftab720
\pard\pardeftab720

\f0\fs24 \cf2 12-8-2015\
\

\b WELCOME
\b0 \
\
\cf0 Hi and welcome to ENIGMA! Here, we\'92ve packaged some of the ENIGMA structural MRI analysis protocols with several wrapper scripts to facilitate the easiest data processing possible. These wrappers scripts were developed by Eric Kan, Julia Anglin, and Sook-Lei Liew to implement all of the excellent scripts written by the ENIGMA team. Many thanks to NPNL lab members and Michael Borich for great beta testing and feedback.\
 \
\cf2 Any troubleshooting issues should be directed to both Sook-Lei Liew (sliew@usc.edu) and the Neural Plasticity and Neurorehabilitation Laboratory (npnl@usc.edu). Thanks for doing this - we look forward to a productive collaboration!\

\b \
GETTING STARTED
\b0 \
\
There is a little setup required before you start:\
\
1) The project directory must be built as follows:\
\
*Note: script assumes the string, 'subj' is somewhere in the subject names\
\
Scripts assume the following structure\
\
ENIGMA_parent_directory/\
	-> inputs/ (mprage/anatomicals, 1 per subject)\
		-> subj01 (within this folder should be subj01.nii.gz)\
		-> subj02 (within this folder should be subj02.nii.gz)\
		..\
	-> outputs/\
		-> subj01 (freesurfer outputs; will be created)\
		-> subj02\
		...\
	-> enigma_wrapscripts/ \
		-> bash/\
		-> Matlab/\
		-> R/\
\
This should have been set up already, but you should add your subject .nii mirages into the inputs folder.\
\
\cf0 2) Run organize data if necessary: Reorganizes anatomical data into inputs folder of structure below\
\
Usage: ./0_organize_data.sh <subject data header> <directory of current data> <directory for enigma project>\
\
Note 1: This assumes you have already downloaded the enigma folder structure and wrap scripts into ENIGMA_parent_dir but you must delete anything in the "inputs" folder so it is empty \
\
Note 2: uses a numerical ordering (e.g., subj01, subj05, subj2198)\
				\
Note 3: This assumes your anatomicals are all directly within /mycurrdata - if not, minor edits will be needed (If edits needed, contact npnl@usc.edu and sliew@usc.edu).\cf2 \
\
3) FSL, Freesurfer, and Matlab must be installed on your computer. The executables of each need to be in the user's PATH environment (most times this is already setup if the programs are already installed on the machine). For Mac/linux users, to see if this is set up, type nano ~/.bash_profile (or .bash_rc or other equivalent profile) in the terminal (this file may be a different name/path). If this is not set up for a given program, you will need to manually type the following in: \
\
\cf0 \CocoaLigature0 export PATH=\'93<directory>/<program>/bin:$PATH\'94\cf2 \CocoaLigature1  \
\
(but replace <directory>/<program> with your specific path to the program - for instance, to execute Matlab 2013b from the command line, you might use the following line: \
\
export PATH="/Applica\cf0 tions/MATLAB_R2013b.app/bin:$PATH"\cf2 \
\
4) In the recon-all.sh script, line 2 needs to be modified to point where the Freesurfer program has been installed (i.e. replace <PATH TO FREESURFER INSTALLATION> with /Applications/freesurfer). The script recon-all.sh script is found in enigma_wrapscripts/bash/.\
\
5) Make sure all bash scripts and applications are executable. For instance:\
\
\cf0 \expnd0\expndtw0\kerning0
chmod a+w /Applications/freesurfer\
\cf2 \kerning1\expnd0\expndtw0 chmod a+x <parent_dir>/1_enigma_runfreesurfer.sh \
\
\

\b RUNNING THE SCRIPTS\

\b0 \
When steps above are complete, you can run the 3 wrapper scripts:\
\

\b 1. Run Freesurfer.\

\b0 This will take some time to run! Run 1_enigma_runfreesurfer.sh \'a0 - \'a0 simply runs freesurfer for a single subject (~12-16 hrs per subject)\
\
Usage is: ./1_enigma_runfreesurfer.sh <subject number> <path to parent project directory>\
\
NOTE: To run over many subjects, you can use a for loop:\
\
for sub in 'list of subjects'\
do\
./1_enigma_runfreesurfer.sh stroke1-subj01 /Users/ekan/Project\
done\
\
(e.g. for i \{1..100\}; do ./1_enigma_runfreesurfer.sh subj$\{i\} /Users/username/Desktop/ENIGMA/enigma_wrapscripts; done)\
\
A script to run this for loop is also included: 1a_enigma_runfreesurfer_loop.sh\
\

\b 2. Run Quality Checks (subcortical).
\b0 \
After the completion of the 1st step, you should have freesurfer output for each subject in the subjects folder located in the outputs folder in your parent directory. Now you can run 2_extractsubcortical_volumes.sh \'a0- which does everything outlined in 'Instructions_ENIGMA_subcortical_volumes.doc' \'a0 (~30 min for 27 subjects)\
\
Usage is: ./2_extractsubcortical_volumes.sh <path to parent project directory>\
\

\b 3. Run Quality Checks (cortical).
\b0 \
Now you can run 3_extractcortical_volumes.sh \'a0- which does everything outlined in 'Instructions_ENIGMA_cortical_volumes.doc' \'a0 (~30 min for 27 subjects) \
\
Usage is: ./3_extractcortical_volumes.sh <path to parent project directory>}